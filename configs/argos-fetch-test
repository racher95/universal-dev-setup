#!/bin/bash

# ═══════════════════════════════════════════════════════════════════════════════
# 🐺 ARGOS FETCH - TEST VERSION
# ═══════════════════════════════════════════════════════════════════════════════

# Configuración de rutas portables
ARGOS_IMAGE_PATH="$HOME/.local/share/argos/argos-image.png"
ARGOS_IMAGE_FALLBACK="$HOME/.config/argos/argos-image.png"

# Verificar que la imagen exista
ARGOS_IMAGE=""
if [[ -f "$ARGOS_IMAGE_PATH" ]]; then
    ARGOS_IMAGE="$ARGOS_IMAGE_PATH"
elif [[ -f "$ARGOS_IMAGE_FALLBACK" ]]; then
    ARGOS_IMAGE="$ARGOS_IMAGE_FALLBACK"
else
    echo "⚠️  Imagen ARGOS no encontrada"
    exit 1
fi

# Verificar chafa
if ! command -v chafa &> /dev/null; then
    echo "⚠️  chafa no encontrado"
    exit 1
fi

# Limpiar pantalla
clear

# Mostrar imagen con chafa directamente
echo ""
echo "🐺 ARGOS WOLF SYSTEM 🐺"
echo ""

# Ejecutar chafa con timeout implícito
if [[ "$TERM_PROGRAM" == "iTerm.app" ]]; then
    chafa --symbols=block --size="18x12" "$ARGOS_IMAGE" 2>/dev/null
else
    chafa --symbols=block --size="25x12" "$ARGOS_IMAGE" 2>/dev/null
fi

echo ""
echo "   👤 Usuario: $(whoami)@$(hostname)"
echo "   🖥️  Sistema: $(uname -s)"
echo "   🔧 Kernel: $(uname -r)"
echo "   📂 Directorio: $(pwd)"
echo ""
