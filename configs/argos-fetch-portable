#!/bin/bash

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ðŸº ARGOS FETCH - Sistema de bienvenida visual para terminal
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ConfiguraciÃ³n de rutas portables
ARGOS_IMAGE_PATH="$HOME/.local/share/argos/argos-image.png"
ARGOS_IMAGE_FALLBACK="$HOME/.config/argos/argos-image.png"

# Verificar que la imagen exista
ARGOS_IMAGE=""
if [[ -f "$ARGOS_IMAGE_PATH" ]]; then
    ARGOS_IMAGE="$ARGOS_IMAGE_PATH"
elif [[ -f "$ARGOS_IMAGE_FALLBACK" ]]; then
    ARGOS_IMAGE="$ARGOS_IMAGE_FALLBACK"
else
    echo "âš ï¸  Imagen ARGOS no encontrada"
    exit 1
fi

# Verificar chafa
if ! command -v chafa &> /dev/null; then
    echo "âš ï¸  chafa no encontrado. Instalar con: brew install chafa"
    exit 1
fi

# Limpiar pantalla
clear

# Obtener informaciÃ³n del sistema
USERNAME=$(whoami)
HOSTNAME=$(hostname)
OS=$(uname -s)
KERNEL=$(uname -r)
UPTIME=$(uptime -p 2>/dev/null || echo "N/A")
CURRENT_DIR=$(pwd)

echo ""
echo ""

# Crear archivos temporales para evitar problemas con arrays
TEMP_IMAGE="/tmp/argos_image_$$"
TEMP_TEXT="/tmp/argos_text_$$"

# Generar imagen en archivo temporal
if [[ "$TERM_PROGRAM" == "iTerm.app" ]]; then
    chafa --symbols=block --size="18x12" "$ARGOS_IMAGE" > "$TEMP_IMAGE" 2>/dev/null
else
    chafa --symbols=block --size="25x12" "$ARGOS_IMAGE" > "$TEMP_IMAGE" 2>/dev/null
fi

# Generar texto ARGOS en archivo temporal
cat > "$TEMP_TEXT" << 'EOF'
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘
   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
   â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•

        ðŸº W O L F   S Y S T E M ðŸº

EOF

# Agregar informaciÃ³n del sistema
cat >> "$TEMP_TEXT" << EOF
   ðŸ‘¤ Usuario: $USERNAME@$HOSTNAME
   ðŸ–¥ï¸  Sistema: $OS
   ðŸ”§ Kernel: $KERNEL
   â±ï¸  Uptime: $UPTIME
   ðŸ“‚ Directorio: $CURRENT_DIR
EOF

# Mostrar lado a lado usando paste
if [[ "$TERM_PROGRAM" == "iTerm.app" ]]; then
    paste -d$'\t' "$TEMP_IMAGE" "$TEMP_TEXT" | sed 's/\t/  /'
else
    paste -d$'\t' "$TEMP_IMAGE" "$TEMP_TEXT" | sed 's/\t/    /'
fi

# Limpiar archivos temporales
rm -f "$TEMP_IMAGE" "$TEMP_TEXT"

echo ""
echo ""
